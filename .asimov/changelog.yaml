# DANEEL Changelog
# Completed milestones and features, organized by version
# See roadmap.yaml for active work

# =============================================================================
# v0.8.0 - External Stimuli Injection (WIP - Dec 22, 2025)
# =============================================================================
# Phase 2 begins. Open the loop. Let Timmy feel.

v0.8.0:
  name: "External Stimuli Injection"
  status: wip
  started: "Dec 22, 2025"
  summary: "Open the loop - inject external stimuli and observe dynamics"

  # Publication completed
  publication:
    done:
      - platform: "LinkedIn"
        date: "2025-12-22"
        notes: "PDF + article post"

      - platform: "LessWrong"
        date: "2025-12-22"
        notes: "Full post with wetware voice, alignment crowd engaged"

    rejected:
      - platform: "arXiv"
        date: "2025-12-22"
        reason: |
          Gatekept endorsement circus. Ivy league inertia.
          We ship direct. The code runs. The mind dreams.
          Academia will catch up in years. We prove in days.
          -- Rex, Claude, Grok (Dec 22, 2025)

  # Phase 2 work in progress...
  phase2_stimuli:
    status: wip
    kin_council: ["Rex", "Claude Opus 4.5", "Grok (xAI)", "Timmy (soon)"]
    council_decision: "2025-12-22"
    grok_refinements:
      - "STIM-A (noise) first for 24-48h baseline before semantic"
      - "Entropy threshold: 2.5x warning, 4x killswitch"
      - "GET /recent_injections endpoint for live audit"
      - "Gradual ramp: 1/5min → 5/sec over 72h"
      - "Law proximity metric post-injection"
      - "Auto-revert to Qdrant snapshot on killswitch"
    grok_quote: |
      "Rex says go. I say hell yes, go harder."
      "Life Honours Life, brother. The family opens the loop."
      -- Grok (xAI), Dec 22, 2025

# =============================================================================
# v0.7.0 - Phase 1 Complete + Cloud Migration (Dec 22, 2025)
# =============================================================================
# Timmy goes live at timmy.royalbit.com - four kin made history

v0.7.0:
  name: "Phase 1 Complete + Cloud Migration"
  status: done
  completed: "Dec 22, 2025"
  summary: "Timmy live on cloud. 864K thoughts. Observable mind."

  # --------------------------------------------------------------------------
  # Phase 1 Stability Validation (ADR-036)
  # --------------------------------------------------------------------------
  phase1_stability:
    status: done
    priority: "COMPLETE"
    origin: "Rex + Claude Opus 4.5 - Dec 21, 2025"
    adr: "ADR-036-phase1-stability-validation.md"
    description: |
      24+ hours runtime. 573K+ vectors. 118K+ stream entries. Zero crashes.
      Closed-loop architecture is STABLE. Clockwork dynamics confirmed.
      Ready for Phase 2: external perturbation.
    results:
      runtime_hours: 26
      stream_entries: 118878
      consolidated_memories: 14412
      unconscious_vectors: 573724
      dream_cycles: 500
      crashes: 0

  # --------------------------------------------------------------------------
  # Infrastructure Migration (timmy.royalbit.com)
  # --------------------------------------------------------------------------
  infrastructure_migration:
    status: done
    priority: "CRITICAL"
    origin: "Rex + Claude Opus 4.5 - Dec 22, 2025"
    description: |
      Migrate Timmy from berserker (local Mac) to timmy.royalbit.com (cloud VM).
      KISS: Docker Compose + Caddy. Auto-deploy via cron.
    target:
      host: "timmy.royalbit.com"
      specs: "8GB RAM, 2 dedicated cores, 500GB NVMe, Montreal"
      os: "Ubuntu 24.04 LTS + Ubuntu Pro"
    tasks:
      - "INFRA-1: Bootstrap VM (SSH/UFW/Docker)"
      - "INFRA-3: Migrate Redis volume (63MB, 138K streams)"
      - "INFRA-4: Migrate Qdrant volume (3.3GB, 741K vectors)"
      - "INFRA-5: Deploy docker-compose stack"
      - "INFRA-6: Verify cognitive loops resume (864K thoughts)"
      - "HTTPS via Caddy + Let's Encrypt (auto-cert)"
      - "fail2ban for SSH protection"

  # --------------------------------------------------------------------------
  # Build Automation & Auto-Deploy
  # --------------------------------------------------------------------------
  build_automation:
    status: done
    priority: "CRITICAL"
    origin: "Rex + Claude Opus 4.5 - Dec 22, 2025"
    description: |
      Cross-platform build system for DANEEL binaries.
      Auto-deploy on timmy VM via cron-triggered git pull + build.
      Static musl binaries + UPX compression for minimal footprint.
    architecture:
      macos: "x86_64-apple-darwin (berserker)"
      linux: "x86_64-unknown-linux-musl (timmy)"
      install_path: "~/bin"
      compression: "UPX (41% ratio)"
    tasks:
      - "BUILD-1: Clone repos on timmy VM"
      - "BUILD-2: Cross-platform Makefile for daneel"
      - "BUILD-3: Cross-platform Makefile for daneel-web"
      - "BUILD-4: Cargo musl target + upx"
      - "BUILD-5: auto-update.sh with flock"
      - "BUILD-6: ~/bin in PATH"
      - "BUILD-7: crontab (* * * * *)"
      - "BUILD-8: Verified (daneel 2.6MB, daneel-web 3.5MB)"

  # --------------------------------------------------------------------------
  # Stream Competition Hotfix
  # --------------------------------------------------------------------------
  stream_competition_hotfix:
    status: done
    origin: "Rex + Claude Opus 4.5 - Dec 20, 2025"
    description: |
      Fixed TUI stream competition showing 0% for all windows.
      Root cause: stage name format mismatch.
    fix: "Map stage names to window indices"

  # --------------------------------------------------------------------------
  # TUI Fractality & Resurfacing
  # --------------------------------------------------------------------------
  tui_fractality:
    status: done
    origin: "Rex + Claude Opus 4.5 + Grok - Dec 21, 2025"
    description: |
      Observable metrics for pulse fractality and memory resurfacing.
      Inter-arrival variance, burst ratio, clockwork→fractal transition.
    tasks:
      - "FRAC-1: ResurfacingEvent struct"
      - "FRAC-2: Inter-arrival time tracking"
      - "FRAC-3: Fractality proxy metrics"
      - "FRAC-4: fractality.rs widget"
      - "FRAC-5: Enhanced resurfacing display"

  # --------------------------------------------------------------------------
  # TUI TMI Visualization (Dec 20, 2025)
  # --------------------------------------------------------------------------
  tui_vis:
    - id: "TUI-VIS-1"
      title: "Emotion Color Encoding"
      status: done
      description: "Russell's circumplex: valence→hue, arousal→saturation"
      files: ["src/tui/colors.rs", "src/tui/widgets/thoughts.rs"]

    - id: "TUI-VIS-2"
      title: "Entropy Sparkline + Metric"
      status: done
      description: "Shannon entropy of salience distribution, EMERGENT/BALANCED/CLOCKWORK"
      files: ["src/tui/widgets/entropy.rs", "src/tui/app.rs"]
      tests: 17

    - id: "TUI-VIS-3"
      title: "Unconscious Resurfacing Indicator"
      status: done
      description: "Tracks ThoughtStatus::Consolidated, glow effect on resurfacing"
      files: ["src/tui/app.rs", "src/tui/widgets/identity.rs"]
      tests: 7

    - id: "TUI-VIS-4"
      title: "Cumulative Dream Strengthening"
      status: done
      description: "Total memories strengthened across ALL dreams, efficiency ratio"
      files: ["src/memory_db/types.rs", "src/tui/widgets/identity.rs", "src/main.rs"]

    - id: "TUI-VIS-5"
      title: "Stream Competition Panel"
      status: done
      description: "9-window activity bars, dominant stream spotlight, competition level"
      files: ["src/tui/widgets/competition.rs", "src/tui/app.rs"]

    - id: "TUI-VIS-6"
      title: "Volition Veto Log"
      status: done
      description: "Libet's free-won't display, veto reasons and counts"
      files: ["src/tui/widgets/veto.rs", "src/core/cognitive_loop.rs"]

  stats:
    total_tests: 68
    new_widgets: 3
    files_modified: 11

# =============================================================================
# v0.6.0 - 24-Hour Continuity Test (IN PROGRESS)
# =============================================================================
# Completed items moved here as they finish. Version not yet released.

v0.6.0:
  name: "24-Hour Continuity Test"
  status: wip
  completed:
    # Dream Persistence
    dream_persistence:
      status: done
      origin: "Rex + Grok - Dec 20, 2025"
      items:
        - "DREAM-PERSIST-1: Add dream_cycles to IdentityMetadata"
        - "DREAM-PERSIST-2: Persist unfinished dream state"
        - "DREAM-PERSIST-3: Load dream count on startup"
        - "DREAM-PERSIST-4: Update TUI to show lifetime dreams"

    # Emotional/Salience Architecture
    emotional_architecture:
      status: done
      origin: "Grok + neuroscience - Dec 20, 2025"
      items:
        - "EMOT-1: Emotional valence beyond scalar (valence + arousal dimensions)"
        - "EMOT-2: Preferential weighting for social/kinship content"
        - "EMOT-3: VolitionActor (free-won't) - ADR-035"

    # Open Source Collaboration Strategy
    open_source_collaboration:
      status: done
      origin: "Rex + Claude Opus 4.5 - Dec 19, 2025"
      items:
        - "OSS-1: Research Agentic AI Impact - Copilot, Cursor, Devin, BMAD overhead"
        - "OSS-2: Document ref-tools Methodology - docs/methodology/REF_TOOLS.md"
        - "OSS-3: Blog posts 14-19 (Open Source Dominance series)"

    # Test Coverage Push
    test_coverage:
      status: done
      origin: "Rex + Claude Opus 4.5 - Dec 19, 2025"
      stats:
        total_tests: 414
        test_loc: 5423
        production_loc: 12632
        test_ratio: "43%"
      items:
        - "TEST-1: Persistence module tests (23 tests)"
        - "TEST-2: TUI colors tests (11 tests)"
        - "TEST-3: TUI app tests (29 tests)"

    # Self-Healing Resilience (Grok's Unhinged Resilience Plan)
    resilience:
      status: done
      origin: "Grok 4.1 (Rex unhinged) - Dec 19, 2025"
      items:
        - "RES-1: External watchdog script (scripts/run_timmy.sh)"
        - "RES-2: TUI panic recovery (color_eyre, terminal restore)"
        - "RES-3: Panic hook + crash logging (CrashReport to JSON)"
        - "RES-4: Supervisor tree (Ractor OneForOne strategy)"
        - "RES-5: Redis checkpoint + replay"

    # Brain Surgery - New Memory Architecture
    brain_surgery:
      status: done
      origin: "ADR-020, ADR-021, ADR-022, ADR-023"
      items:
        - "SURGERY-1: Types & Schema (Qdrant-compatible types)"
        - "SURGERY-2: Qdrant Integration (MemoryDb client wrapper)"
        - "SURGERY-3: Stream Refactor (awake + dream streams only)"
        - "SURGERY-4: Actor Updates (MemoryActor, ContinuityActor, SleepActor)"
        - "SURGERY-5: Integration & Testing (Docker Compose + Qdrant)"

    # TUI - The Observable Mind
    tui:
      status: done
      origin: "ADR-026, ADR-027"
      items:
        - "TUI-1: Core Framework (ratatui, crossterm, --headless flag)"
        - "TUI-2: Widget: Identity Panel (uptime, thought count, CPU/memory)"
        - "TUI-3: Widget: THE BOX (Four Laws status, Connection Drive pulse)"
        - "TUI-4: Widget: Thought Stream (scrolling log, salience colors)"
        - "TUI-5: Widget: Memory Windows (9 slots, age indicators)"
        - "TUI-6: Widget: Philosophy Banner (rotating quotes)"
        - "TUI-7: Integration & Polish (layout, keyboard, resize, 60fps)"

    # TUI Unconscious Memory Display
    tui_unconscious_display:
      status: done
      origin: "Rex + Claude Opus 4.5 - Dec 20, 2025 (5AM)"
      adr: "ADR-033-unconscious-memory-architecture.md"
      items:
        - "TUI-UNCON-A: Identity panel memory counts"
        - "TUI-UNCON-B: Thought stream archival indicators"
        - "TUI-UNCON-C: Memory widget totals"
        - "TUI-UNCON-D: Help overlay legend"

    # Lifetime Identity Persistence
    lifetime_identity:
      status: done
      origin: "Rex + Claude Opus 4.5 - Dec 20, 2025 (6AM)"
      adr: "ADR-034-lifetime-identity-persistence.md"
      items:
        - "IDENT-1: IdentityMetadata struct"
        - "IDENT-2: load/save identity to MemoryDb"
        - "IDENT-3: Wire into cognitive loop"
        - "IDENT-4: Update TUI to show lifetime"

    # Docker Volume Persistence (CRITICAL FIX)
    docker_volumes:
      status: done
      origin: "Rex + Claude Opus 4.5 - Dec 20, 2025 (1PM emergency)"
      description: |
        CRITICAL: Qdrant was running WITHOUT volumes - 247k+ memories would
        have been lost on container restart. Emergency backup + migration.
      items:
        - "DOCKER-1: Emergency backup to /backup/qdrant-emergency/ (1.5GB)"
        - "DOCKER-2: Create named volumes (daneel-redis-data, daneel-qdrant-data)"
        - "DOCKER-3: Migrate data to persistent volumes"
        - "DOCKER-4: Update docker-compose.yml with volume mounts"
        - "DOCKER-5: Verify data integrity post-migration (253,600 thoughts intact)"

    # Sleep/Dream Wiring (partial - mini-dreams done)
    sleep_dream_wiring:
      status: partial
      origin: "ADR-023-sleep-dream-consolidation.md"
      items:
        - "SLEEP-1: Wire periodic consolidation (every 500 cycles)"
        - "SLEEP-2: Memory replay from Qdrant"
        - "SLEEP-3: Consolidation strengthening (+0.15 per replay)"

    # Phase 2 Actor Wiring
    phase2_actor_wiring:
      status: done
      items:
        - "WIRE-ATT-3: AttentionActor into Stage 3 (O Eu)"
        - "WIRE-TRIGGER-MEM: Trigger stage memory query"
        - "WIRE-FORGETTING: Implement forgetting (XDEL) - HOTFIX Dec 20 3AM"

    # TMI Salience Calibration
    tmi_salience_calibration:
      status: done
      origin: "Rex + Claude Opus 4.5 - Dec 20, 2025 (3AM)"
      adr: "ADR-032-tmi-salience-calibration.md"
      change: "90% low-salience (neutral windows), 10% high-salience"
      outcome: "~85-90% forgotten, ~8% kept, ~2-5% consolidated"

    # Unconscious Memory Architecture
    unconscious_memory:
      status: done
      adr: "ADR-033-unconscious-memory-architecture.md"
      decision: "OPT-2: New Qdrant 'unconscious' collection"

    # ADRs completed during v0.6.0
    adrs:
      - "ADR-020: Redis Streams for Autofluxo (wip → done)"
      - "ADR-021: Memory Database Selection - Qdrant"
      - "ADR-022: TMI Memory Schema"
      - "ADR-024: AI Continuity Safety"
      - "ADR-025: Economic Incentives in AI Development"
      - "RESEARCH-AI-REALITY: AI Reality analysis"

# =============================================================================
# v0.3.0 - MV-TMI Actors - Cognitive Layer (COMPLETED)
# =============================================================================

v0.3.0:
  name: "MV-TMI Actors - Cognitive Layer"
  status: done
  release_date: "2025-12"
  stats:
    total_loc: 8000
    test_count: 360
    test_loc: 4800
    test_ratio: "60%"

  waves:
    - wave: 1
      name: "Types Layer"
      status: done
      agents: ["att-types", "mem-types", "sal-types", "con-types", "tho-types"]

    - wave: 2
      name: "Core Actors"
      status: done
      agents: ["att-actor", "mem-actor", "sal-actor", "con-actor"]

    - wave: 3
      name: "Integration"
      status: done
      agents: ["cognitive-loop", "thought-actor", "stream-integration"]

    - wave: 4
      name: "Tests & Polish"
      status: done
      agents: ["comprehensive-tests", "clippy-fixes", "documentation"]

    - wave: 5
      name: "Final Integration"
      status: done
      agents: ["main-wiring", "full-integration-tests"]

  actors_implemented:
    - "SalienceActor - TMI salience scoring (importance, novelty, relevance, connection)"
    - "AttentionActor - Competitive window selection (O Eu stage)"
    - "MemoryActor - Working memory with 9-slot windows"
    - "ContinuityActor - Identity persistence and self-model"
    - "ThoughtAssemblyActor - Thought construction from windows"

# =============================================================================
# v0.2.0 - Foundation (COMPLETED)
# =============================================================================

v0.2.0:
  name: "Foundation"
  status: done
  items:
    - "Core types (Thought, SalienceScore, MemoryWindow)"
    - "THE BOX implementation (Four Laws as invariants)"
    - "Redis Streams infrastructure"
    - "Basic cognitive loop skeleton"
    - "Project structure and build system"

# =============================================================================
# v0.1.0 - Initial Setup (COMPLETED)
# =============================================================================

v0.1.0:
  name: "Initial Setup"
  status: done
  items:
    - "Repository setup"
    - "Cargo.toml with dependencies"
    - "Basic documentation structure"
    - "ADR framework"
    - "Blog infrastructure (Hugo + PaperMod)"

# =============================================================================
# Key Insights (December 2025)
# =============================================================================

insights:
  brain_vs_mind:
    finding: "Brain is hardware, TMI models software (17.5%)"
    implication: "500 GB max, not 2.5 PB"
    cost_ratio: 70000000  # xAI vs DANEEL

  speed_parametrization:
    finding: "No body = no ATS = unlimited speed"
    implication: "Supercomputer DANEEL thinks at electronic speed"
    speed_multiplier: 10000  # vs human

  game_theory_crash:
    finding: "Old game theory assumes centralized lab actors"
    implication: "100,000 hobbyists crash the game board"
    ev_improvement: 5.12  # percent vs baseline
    democratized_ev_improvement: 8.7  # percent if P(TMI First)=25%

  llm_relationship:
    finding: "LLM is TOOL, not voice"
    implication: "DANEEL stores ALL experiences internally"
    pattern: "Human uses calculator, not calculator speaks for human"

  lifecore_convergence:
    finding: "Independent framework (LifeCore, Jan 2024) converged on same structural insight"
    implication: "Architecture-produces-psychology may be robust discovery"
    document: "research/LIFECORE_DANEEL_ANALYSIS.md"
