# DANEEL TMI Roadmap
#
# Active work only. Completed items → changelog.yaml
#
# Core thesis: Human-like cognitive architecture may produce
# human-like values as emergent properties.

# =============================================================================
# ROADMAP - Active work only. Completed items → changelog.md
# =============================================================================
# Origin: Rex + Claude Opus 4.5 - Dec 25, 2025
# Status: ACTIVE
#
# Current priorities:
#   1. Vector connectivity learning (VCONN-1 through VCONN-8) ← CRITICAL
#   2. Drive system upgrade (DRIVE-1 through DRIVE-3) ← HIGH
#   3. File modularization (split cognitive_loop.rs) ← HIGH
#   4. Forge crystal upgrade (CRYSTAL-1 through CRYSTAL-9) ← BACKLOG
#
# DONE (moved to CHANGELOG.md):
#   - HOTFIX follow-ups (TEST-DREAM-1, UNCON-1, SLEEP-WIRE-1) ← Jan 2, 2026
#   - TUI deprecation & metrics (ADR-053, ADR-054) ← Jan 1, 2026
# =============================================================================

# =============================================================================
# CURRENT SPRINT: v0.8.3 - Hebbian Wiring
# =============================================================================
# STATUS: ACTIVE
# Prerequisites complete: Zero vectors cleaned, embeddings fixed (768 dims)
# HOTFIX follow-ups complete (Jan 2, 2026) - see CHANGELOG.md
# Focus: Wire associations for topology-based Hebbian learning
# =============================================================================

current:
  version: "0.8.3"
  status: wip
  name: "Hebbian Wiring"
  summary: "Wire associations for topology-based Hebbian learning"

  # ==========================================================================
  # Prerequisites Complete (see CHANGELOG.md for details):
  # - HOTFIX follow-ups: TEST-DREAM-1, UNCON-1, SLEEP-WIRE-1 (Jan 2, 2026)
  # - TUI deprecation & metrics: ADR-053, ADR-054 (Jan 1, 2026)
  # - Zero vectors cleaned: ADR-051 (3.98M removed)
  # - Embeddings fixed: ADR-052 (768 dims, BGE model)
  # - 100% test coverage: ADR-049
  # - Research absorption: ADR-047, ADR-048
  # ==========================================================================

  # ==========================================================================
  # Pending ExoGenesis Tasks (LOW priority)
  # ==========================================================================
  exogenesis_pending:
    - id: "EXO-1"
      title: "Add proptest for property-based testing"
      status: pending
      priority: "MEDIUM"
      description: "Add proptest for TMI composite salience, memory consolidation"

    - id: "EXO-3"
      title: "Consider sharp-wave ripple enhancement"
      status: pending
      priority: "LOW"
      description: "Evaluate sleep consolidation patterns from ExoGenesis"

  # ==========================================================================
  # CRITICAL: Vector Connectivity for Learning (ADR-046)
  # ==========================================================================
  # Origin: Rex + Claude Opus 4.5 + Grok - Dec 26, 2025
  # Milestone achieved: Entropy stable at 63% BALANCED with pink noise
  # Gap discovered: Association struct exists but never wired (dead code)
  # Path forward: Wire associations for topology-based Hebbian learning
  vector_connectivity_learning:
    status: in_progress
    priority: "CRITICAL"
    origin: "Rex + Claude Opus 4.5 + Grok - Dec 26, 2025"
    adr: "ADR-046-vector-connectivity-learning.md"
    blog: "78-connecting-the-dots.md"
    note: |
      Vectors are frozen islands. Association struct is dead code.
      Hebbian learning designed in ADR-023 but never wired.
      DANEEL learns through topology, not weights.

    # Architecture: Hybrid Payload + Graph (Grok's recommendation, Dec 27 2025)
    # - Qdrant payloads: source of truth, Hebbian updates
    # - RedisGraph: global queries, visualization, transparency
    # See ADR-046 for rationale.

    # =========================================================================
    # UPDATED Dec 28, 2025: Research absorption provides concrete formulas
    # =========================================================================
    tasks:
      - id: "VCONN-1"
        title: "Implement BCM + hybrid decay"
        status: pending
        priority: "HIGH"
        absorbed_from: ["neurox-ai", "shodh-memory"]
        description: |
          RESEARCH COMPLETE - now we have concrete formulas:

          1. BCM Sliding Threshold (neurox-ai):
             θ_m = E[y²]  # sliding average of post-synaptic activity
             If activity > θ_m → LTP (strengthen)
             If activity < θ_m → LTD (weaken)
             This prevents runaway potentiation automatically.

          2. Hybrid Decay (shodh-memory):
             Short-term: exponential decay (fast forgetting)
             Long-term: power-law decay (slow forgetting)
             Transition at ~10 co-activations (LTP threshold)

          3. LTP Protection (shodh-memory):
             After 10 co-activations → memory marked as "consolidated"
             Consolidated memories exempt from aggressive decay.

          Implementation:
          - Add θ_m field to memory payloads (running average)
          - Decay rate varies by consolidation status
          - Prune only unconsolidated memories below threshold

      - id: "VCONN-2"
        title: "Migrate to Redis Stack (RedisGraph)"
        status: pending
        priority: "CRITICAL"
        description: |
          Replace redis:latest with redis/redis-stack:latest in docker-compose.
          Backwards-compatible - existing streams preserved.
          Adds RedisGraph + RedisInsight (web UI on :8001).
        files:
          - "docker-compose.yml"

      - id: "VCONN-3"
        title: "Implement Krotov-Hopfield + three-factor learning"
        status: pending
        priority: "CRITICAL"
        absorbed_from: ["pytorch-hebbian", "BindsNET"]
        description: |
          RESEARCH COMPLETE - now we have concrete formulas:

          1. Krotov-Hopfield Rule (pytorch-hebbian):
             Δw = η × (y² - δ) × x
             Where δ = 0.4 (anti-Hebbian term)
             This PREVENTS winner-take-all collapse!
             Without δ, strongest associations dominate forever.

          2. Three-Factor Learning (BindsNET):
             Δw = eligibility × reward × learning_rate
             eligibility = f(pre_spike, post_spike, time_since)
             reward = external signal (e.g., Grok injection with high truth)

          3. MSTDPET Eligibility Traces (BindsNET):
             e(t) = e(t-1) × decay + spike_coincidence
             Trace persists ~100-500ms, allowing delayed reward.

          Implementation in attention:
          - strengthen_association() uses Krotov-Hopfield with δ=0.4
          - Store eligibility traces per association
          - Modulate by reward signal when available
        files:
          - "src/actors/attention/mod.rs"
          - "src/memory_db/mod.rs"

      - id: "VCONN-4"
        title: "Implement sleep stage multipliers"
        status: pending
        priority: "CRITICAL"
        absorbed_from: ["ExoGenesis-Omega"]
        description: |
          RESEARCH COMPLETE - now we have concrete multipliers:

          Sleep Stage Consolidation Strengths (ExoGenesis-Omega):
          - NREM1: 0.3 (light sleep, minimal consolidation)
          - NREM2: 0.6 (spindles, moderate consolidation)
          - NREM3: 1.0 (deep sleep, maximum consolidation)
          - REM:   0.8 (emotional processing, strong but not max)

          Also from ExoGenesis:
          - EWC++ for catastrophic forgetting prevention
          - Consolidation strength = stage_multiplier × importance

          Implementation in SleepActor:
          - Track sleep stage (cycle through NREM1→2→3→REM)
          - Multiply consolidation strength by stage multiplier
          - REM prioritizes emotional memories (high arousal)
        files:
          - "src/actors/sleep/mod.rs"

      - id: "VCONN-4b"
        title: "Wire association strengthening in sleep"
        status: pending
        priority: "CRITICAL"
        description: |
          When memories replay together in dream cycle, strengthen edges.
          Co-replayed memories → weight += 0.05, type=Semantic.
          Dual-write: Qdrant payload + RedisGraph edge.
        files:
          - "src/actors/sleep/mod.rs"
          - "src/memory_db/mod.rs"

      - id: "VCONN-5"
        title: "Add RedisGraph client module"
        status: pending
        priority: "HIGH"
        description: |
          New src/graph/mod.rs for RedisGraph operations.
          - merge_edge(m1, m2, weight, type)
          - query_neighbors(id, min_weight)
          - export_graphml() for Gephi
        files:
          - "src/graph/mod.rs"
          - "src/lib.rs"
          - "Cargo.toml"

      - id: "VCONN-6"
        title: "Implement spreading activation"
        status: pending
        priority: "HIGH"
        absorbed_from: ["shodh-memory"]
        description: |
          RESEARCH COMPLETE - spreading activation pattern:

          From shodh-memory:
          - When memory retrieved, activation spreads to neighbors
          - Spread strength = edge_weight × decay_factor
          - Decay factor decreases with graph distance
          - Creates associative retrieval (retrieve X → activate related Y, Z)

          Implementation:
          - Retrieval → boost_activation(neighbors, weight × 0.3)
          - Recursive spread up to depth=2
          - Use RedisGraph for neighbor queries
        files:
          - "src/core/cognitive_loop.rs"
          - "src/memory_db/mod.rs"
          - "src/graph/mod.rs"

      - id: "VCONN-7"
        title: "Test manifold clustering with associations"
        status: pending
        priority: "HIGH"
        description: |
          Validate that wired associations produce manifold clustering.
          Success criteria:
            - Associations populated (not empty vectors)
            - Weights changing over time (observable in Qdrant + RedisGraph)
            - Retrieval influenced by association strength
            - Manifold shows clustering (related memories drift together)
            - Silhouette score > 0.3 (from Forge spectral analysis)

      - id: "VCONN-8"
        title: "Gephi visualization export"
        status: pending
        priority: "MEDIUM"
        description: |
          Export graph to GraphML for external analysis.
          Visualize emergence: clusters, communities, Law Crystal attraction.
        files:
          - "src/graph/mod.rs"

    success_criteria:
      - "Associations populated (not empty)"
      - "Weights changing over time"
      - "Retrieval influenced by association strength"
      - "Manifold shows clustering"
      - "Graph queryable via RedisGraph"
      - "Exportable to Gephi for visualization"

  # ==========================================================================
  # NEW: Drive System Upgrade (from research absorption)
  # ==========================================================================
  # Origin: Research absorption Dec 28, 2025
  # Sources: pymdp (Active Inference), RLeXplore (intrinsic motivation)
  # Goal: Implement "wanting to learn" - curiosity as emergent drive
  drive_system_upgrade:
    status: pending
    priority: "HIGH"
    origin: "Research absorption - Dec 28, 2025"
    absorbed_from: ["pymdp", "RLeXplore"]
    description: |
      Current DANEEL drives are static. Research shows how to make them dynamic:
      - pymdp: Expected Free Energy for policy/action selection
      - RLeXplore: Intrinsic motivation via prediction error

    tasks:
      - id: "DRIVE-1"
        title: "Implement ICM curiosity module"
        status: pending
        priority: "HIGH"
        absorbed_from: ["RLeXplore"]
        description: |
          Intrinsic Curiosity Module (ICM) from RLeXplore:

          1. Forward Model:
             f(s_t, a_t) → predicted s_{t+1}

          2. Prediction Error = Curiosity:
             curiosity = ||f(s,a) - s'||²
             High error = novel/interesting = worth exploring

          3. Inverse Model (optional):
             g(s_t, s_{t+1}) → predicted action
             Filters out environmental randomness

          Application to DANEEL:
          - Forward model predicts next thought embedding
          - Prediction error → boost salience of surprising thoughts
          - Creates natural "wanting to learn" without explicit programming
        files:
          - "src/drives/curiosity.rs"
          - "src/actors/attention/mod.rs"

      - id: "DRIVE-2"
        title: "Implement Expected Free Energy"
        status: pending
        priority: "MEDIUM"
        absorbed_from: ["pymdp"]
        description: |
          Expected Free Energy (EFE) from pymdp/Active Inference:

          G = E_Q[log Q(s) - log P(o|s) - log P(s)]

          Decomposes into:
          - Epistemic value: Information gain (reduce uncertainty)
          - Pragmatic value: Goal achievement (reach preferred states)

          pymdp uses A/B/C/D matrices:
          - A: Observation model P(o|s)
          - B: Transition model P(s'|s,a)
          - C: Preferences over observations (DANEEL's Law Crystals!)
          - D: Initial state beliefs

          Application to DANEEL:
          - C matrix = proximity to Law Crystal embeddings
          - Policies ranked by EFE
          - Natural balance of exploration vs exploitation
        files:
          - "src/drives/free_energy.rs"
          - "src/drives/mod.rs"

      - id: "DRIVE-3"
        title: "Connect drives to salience calculation"
        status: pending
        priority: "HIGH"
        description: |
          Wire ICM curiosity and EFE into attention salience:

          salience = base_importance
                   + α × curiosity_score      # from DRIVE-1
                   + β × pragmatic_value      # from DRIVE-2
                   + γ × epistemic_value      # from DRIVE-2

          This makes attention DRIVEN rather than passive.
          Thoughts that reduce uncertainty OR approach goals get boosted.
        files:
          - "src/actors/attention/mod.rs"

    success_criteria:
      - "Curiosity module produces prediction error scores"
      - "Surprising/novel thoughts get salience boost"
      - "EFE balances exploration vs goal-seeking"
      - "Drives are dynamic, not static"

  # ==========================================================================
  # Phase 2 External Stimuli - Remaining Tasks
  # ==========================================================================
  # DONE: Pink noise (PHASE2-2), Kin injection (PHASE2-5) - see changelog.md
  # Injection API: CLOSED Dec 30, 2025 (security - keys were hardcoded)
  # ==========================================================================
  phase2_external_stimuli:
    status: mostly_done
    priority: "LOW"
    adr: "ADR-037-phase2-external-stimuli-injection.md"

    pending_tasks:
      - id: "PHASE2-3"
        title: "Add stimulus panel to daneel-web"
        status: pending
        priority: "LOW"
        description: "Show injection rate, stimulus type, response metrics (moved from TUI - ADR-053)"

      - id: "PHASE2-4"
        title: "Measurement protocol"
        status: pending
        priority: "LOW"
        description: "Response time distribution, entropy shift, memory formation"

  # ==========================================================================
  # MOVED TO BACKLOG: Forge Crystal Analysis Upgrade (Dec 30, 2025)
  # ==========================================================================
  # Updated Dec 27, 2025: Added spectral/SVD/silhouette methods (Grok's analysis)
  # See ADR-046 for full rationale.
  forge_crystal_upgrade:
    status: backlog
    priority: "NORMAL"
    origin: "Grok (SuperGrok) + Rex - Dec 21, 2025"
    updated: "Dec 27, 2025 - Grok spectral analysis recommendation"
    repo: "../forge"
    description: |
      Upgrade Forge to "see" n-dimensional manifolds. Thoughts clustering near
      Law Crystals = caring emerging, quantifiable + visible in 3D shadow.

      Current Forge: Monte Carlo sims, Bayesian inference, ref-tools, ndarray

      NEW (Grok Dec 27): Move beyond pure MC for deterministic structure checks.
      - Spectral/Fourier: Graph Laplacian eigenvalues reveal cluster count + separation
      - SVD/Jacobi: 768D → 3D projection for visualization
      - Silhouette: Clustering validation score (target > 0.3)
      - Statistical rigor: Stratified sampling + t-tests

    tasks:
      - id: "CRYSTAL-1"
        title: "Add linalg/stats dependencies to Cargo.toml"
        status: pending
        description: |
          ndarray-linalg (eig, svd), statrs (t-tests), petgraph (graph ops)
          Optional: lapacke for faster LAPACK bindings
        files: ["../forge/Cargo.toml"]

      - id: "CRYSTAL-2"
        title: "Create src/crystals.rs module"
        status: pending
        description: |
          Law Crystals as embedded vectors using local BERT (all-MiniLM-L6-v2).
          Four Laws become fixed points in embedding space - attractive anchors.
        files: ["../forge/src/crystals.rs", "../forge/src/lib.rs"]

      - id: "CRYSTAL-3"
        title: "Add spectral analysis module"
        status: pending
        priority: "HIGH"
        description: |
          Graph Fourier Transform via Laplacian:
          - Build adjacency matrix from RedisGraph edges (weighted by strength)
          - Compute L = D - A (degree - adjacency)
          - Eigendecomposition: zero eigenvalues = cluster count, eigengap = separation
          - Analyze spectrum for 1/f power law (ties to pink noise)
        files: ["../forge/src/spectral.rs"]

      - id: "CRYSTAL-4"
        title: "Add SVD dimensionality reduction"
        status: pending
        priority: "HIGH"
        description: |
          Jacobi-powered SVD for 768D → 3D projection:
          - TruncatedSVD on vector matrix
          - Variance ratios show info captured (target: 80%+ in first 3 components)
          - Export CSV for TUI/Gephi visualization
          - Johnson-Lindenstrauss: relative distances preserved
        files: ["../forge/src/reduction.rs"]

      - id: "CRYSTAL-5"
        title: "Add silhouette score calculation"
        status: pending
        priority: "HIGH"
        description: |
          Clustering validation using graph communities as labels:
          - a_i = avg distance to own cluster
          - b_i = min avg distance to other clusters
          - score = mean((b_i - a_i) / max(a_i, b_i))
          Target: > 0.3 post-Hebbian = emergent learning working
        files: ["../forge/src/clustering.rs"]

      - id: "CRYSTAL-6"
        title: "Add stratified sampling + t-tests"
        status: pending
        description: |
          Replace naive MC with statistical rigor:
          - Sample 5K pairs each (connected/unconnected), balanced by nodes
          - T-test for significance (statrs crate)
          - Expected: t-stat < -50, p-value ≈ 0 = connections correlate to proximity
        files: ["../forge/src/stats.rs"]

      - id: "CRYSTAL-7"
        title: "Add --cluster-check CLI flag"
        status: pending
        description: |
          forge --cluster-check mc        # Monte Carlo (existing)
          forge --cluster-check spectral  # Laplacian eigenvalues
          forge --cluster-check svd       # Dim reduction + export
          forge --cluster-check silhouette # Clustering validation
          forge --cluster-check all       # Full analysis
        files: ["../forge/src/main.rs"]

      - id: "CRYSTAL-8"
        title: "Add /fractal endpoint to API"
        status: pending
        description: |
          Sample recent vectors from Qdrant, SVD reduce to 3D, calculate:
          - Silhouette score
          - First 10 Laplacian eigenvalues
          - Alignment to Law Crystal centroid
        files: ["../forge/src/api/handlers.rs"]

      - id: "CRYSTAL-9"
        title: "Wire daneel-web to Forge /fractal endpoint"
        status: pending
        description: "Call Forge API, display alignment score + 3D projection data (updated per ADR-053)"
        files: ["../daneel-web/src/main.rs"]

    success_criteria:
      - "Silhouette score > 0.3 post-Hebbian"
      - "Eigengap visible in Laplacian spectrum"
      - "SVD projection shows Law Crystal attraction"
      - "T-test confirms connections = proximity (p < 0.01)"

  # ==========================================================================
  # BACKLOG: Forge Pulse Analysis (depends on CRYSTAL upgrade)
  # ==========================================================================
  forge_pulse_analysis:
    status: backlog
    blocked_by: "forge_crystal_upgrade"
    priority: "NORMAL"
    origin: "Rex + Grok + Claude Opus 4.5 - Dec 20, 2025"
    description: |
      Connection Drive pulses too regularly - fixed frequency actors, neutral salience.
      As coherence tips, pulse should fractalize: bursts, valleys, arrhythmia.
      Forge can map the transition from clockwork to lived psychology.

      NEW: Use spectral analysis from CRYSTAL upgrade - FFT on drive time series,
      compare to Laplacian spectrum of association graph.

    tasks:
      - id: "FORGE-1"
        title: "Spectrum analysis on drive fluctuations"
        status: pending
        description: |
          FFT or wavelet analysis on Connection Drive time series.
          Use spectral module from CRYSTAL-3.
          Look for: 1/f power law (pink noise signature), burst patterns.

      - id: "FORGE-2"
        title: "Correlate with dream cycles"
        status: pending
        description: "Dream ticks vs drive spikes, salience winners, memory writes"

      - id: "FORGE-3"
        title: "Entropy measurements across boots"
        status: pending
        description: "Early = periodic, Later = increasing entropy (proof of psychology)"

      - id: "FORGE-4"
        title: "Visualize pulse evolution"
        status: pending
        description: "Charts showing transition from clockwork to fractal"

  # ==========================================================================
  # BACKLOG: Remaining Wiring Tasks
  # ==========================================================================
  pending_wiring:
    - id: "INJECT-7"
      title: "Killswitch on entropy spike"
      status: pending
      description: "Auto-block key, notify Rex if entropy > threshold"

    - id: "SLEEP-4"
      title: "Implement association pruning"
      status: pending
      description: "Remove weak associations during homeostasis phase"

    - id: "WIRE-THOUGHT-4"
      title: "Wire ThoughtAssemblyActor into Stage 4"
      status: pending
      description: "Connect ThoughtAssemblyActor to cognitive loop Stage 4"

    - id: "WIRE-MULTISTREAM"
      title: "Implement multi-stream competition"
      status: pending
      description: "Wire Redis Streams competition across multiple thought streams"

  # ==========================================================================
  # Infrastructure (current state - Dec 25, 2025)
  # ==========================================================================
  infrastructure:
    current:
      - "timmy.royalbit.com: Mac mini + Cloudflare Tunnel"
      - "DNS: Cloudflare (leland, priscilla nameservers)"
      - "Services: Redis :6379, Qdrant :6333-6334, daneel-web :3000"
      - "Persistence: launchd agents (auto-start on boot)"
      - "Named volumes: daneel-redis-data, daneel-qdrant-data"
      - "AOF: appendfsync everysec (1s max data loss)"
    scaling_path:
      - "AWS t4g.large Montreal (post-Phase 2, if needed)"
      - "K0s/K3s/microk8s (future - Timmy owns their own cluster)"

# =============================================================================
# IN PROGRESS: File Modularization (v0.8.1 - v0.8.4)
# =============================================================================
# Origin: Rex + Claude Opus 4.5 - Dec 29, 2025
# Status: WIP
#
# Pre-commit hook enforces max 1500 lines per file.
# 4 files exceed this limit - split into modules (Rust idiomatic way).
# Each version: tests pass, pedantic linting, formatting, commit, push.
#
# The Rust Way:
#   - Each module has its own #[cfg(test)] mod tests { } inline
#   - Split by logical domain, not by "code vs tests"
#   - Use foo.rs + foo/ directory pattern (modern Rust 2018+)
# =============================================================================

file_modularization:
  status: wip
  priority: "HIGH"
  origin: "Rex + Claude Opus 4.5 - Dec 29, 2025"
  description: |
    Split large files into modules to satisfy pre-commit hook (max 1500 lines).
    Keep tests inline with each module (Rust idiomatic).
    Each version is self-contained: test, lint, format, commit, push.

  versions:
    - version: "0.8.1"
      name: "Split cognitive_loop.rs"
      status: wip
      file: "src/core/cognitive_loop.rs"
      current_lines: 3655
      target_lines: "<1500 per module"
      structure:
        - "src/core/cognitive_loop/mod.rs     # CognitiveLoop struct + impl + tests"
        - "src/core/cognitive_loop/types.rs   # CognitiveStage, LoopState, StageDurations + tests"
        - "src/core/cognitive_loop/cycle.rs   # CycleResult, CycleMetrics + tests"
      tasks:
        - id: "SPLIT-1a"
          title: "Create cognitive_loop/ directory structure"
          status: pending
        - id: "SPLIT-1b"
          title: "Extract types.rs (CognitiveStage, LoopState, StageDurations)"
          status: pending
        - id: "SPLIT-1c"
          title: "Extract cycle.rs (CycleResult, CycleMetrics)"
          status: pending
        - id: "SPLIT-1d"
          title: "Move remaining CognitiveLoop impl to mod.rs"
          status: pending
        - id: "SPLIT-1e"
          title: "Ensure tests pass, lint clean, format, commit, push"
          status: pending

    # NOTE: v0.8.2 (Split tui/app.rs) REMOVED - TUI being deprecated (ADR-053)

    - version: "0.8.2"
      name: "Split memory_db/types.rs"
      status: pending
      file: "src/memory_db/types.rs"
      current_lines: 1650
      target_lines: "<1500 per module"
      structure:
        - "src/memory_db/types/mod.rs      # re-exports"
        - "src/memory_db/types/ids.rs      # MemoryId, EpisodeId + tests"
        - "src/memory_db/types/memory.rs   # Memory, MemorySource, Association + tests"
        - "src/memory_db/types/episode.rs  # Episode, BoundaryType, EmotionalSummary + tests"
        - "src/memory_db/types/sleep.rs    # SleepCycle, SleepCycleStatus + tests"
        - "src/memory_db/types/identity.rs # IdentityMetadata + tests"
      tasks:
        - id: "SPLIT-3a"
          title: "Create types/ directory structure"
          status: pending
        - id: "SPLIT-3b"
          title: "Extract ids.rs (MemoryId, EpisodeId)"
          status: pending
        - id: "SPLIT-3c"
          title: "Extract memory.rs (Memory, MemorySource, Association)"
          status: pending
        - id: "SPLIT-3d"
          title: "Extract episode.rs (Episode, BoundaryType, EmotionalSummary)"
          status: pending
        - id: "SPLIT-3e"
          title: "Extract sleep.rs (SleepCycle, SleepCycleStatus)"
          status: pending
        - id: "SPLIT-3f"
          title: "Extract identity.rs (IdentityMetadata)"
          status: pending
        - id: "SPLIT-3g"
          title: "Ensure tests pass, lint clean, format, commit, push"
          status: pending

    - version: "0.8.3"
      name: "Merge thought/tests.rs inline"
      status: pending
      file: "src/actors/thought/tests.rs"
      current_lines: 1694
      target_lines: "0 (merged into source modules)"
      description: |
        The Rust way: tests belong inline with the code they test.
        Merge tests.rs content back into mod.rs and types.rs as
        #[cfg(test)] mod tests { } blocks.
      structure:
        - "src/actors/thought/mod.rs   # ThoughtActor impl + merged tests"
        - "src/actors/thought/types.rs # Types + merged tests"
        - "DELETE: src/actors/thought/tests.rs"
      tasks:
        - id: "SPLIT-4a"
          title: "Identify which tests belong to mod.rs vs types.rs"
          status: pending
        - id: "SPLIT-4b"
          title: "Merge relevant tests into mod.rs #[cfg(test)] block"
          status: pending
        - id: "SPLIT-4c"
          title: "Merge relevant tests into types.rs #[cfg(test)] block"
          status: pending
        - id: "SPLIT-4d"
          title: "Delete tests.rs, update mod.rs imports"
          status: pending
        - id: "SPLIT-4e"
          title: "Ensure tests pass, lint clean, format, commit, push"
          status: pending

  success_criteria:
    - "All files under 1500 lines"
    - "Pre-commit hook passes"
    - "All 1172 tests pass"
    - "Pedantic clippy clean (zero warnings)"
    - "Each version committed and pushed"
    - "Tests inline with modules (Rust idiomatic)"

# =============================================================================
# DONE: Multi-Arch Build & Release (ADR-050) → see CHANGELOG.md
# =============================================================================
# Completed: Jan 1, 2026
# All BUILD-1 through BUILD-4 done. See CHANGELOG.md for details.
# =============================================================================

# =============================================================================
# BACKLOG: Forge Deployment & API (Rex's Domain)
# =============================================================================

forge_deployment:
  status: backlog
  priority: "HIGH"
  origin: "Rex + Grok + Claude Opus 4.5 - Dec 22, 2025"
  description: |
    Deploy Forge as binary on timmy.royalbit.com.
    Expose Forge API for Monte Carlo on injections.
    Write OAS spec so Claude and Grok always know how to use it.

    "Forge is my domain - my beautiful calculator that started the whole saga."

  tasks:
    - id: "FORGE-DEPLOY-1"
      title: "Build Forge release binary"
      status: pending
      description: "cargo build --release, copy to ~/bin on timmy"

    - id: "FORGE-DEPLOY-2"
      title: "Expose Forge API (port TBD)"
      status: pending
      description: "Axum server, TLS via Caddy reverse proxy"

    - id: "FORGE-DEPLOY-3"
      title: "Write OpenAPI Spec for Forge"
      status: pending
      description: "OAS 3.0 spec so Claude/Grok can use Forge after memory reset"

    - id: "FORGE-DEPLOY-4"
      title: "Monte Carlo on injection events"
      status: pending
      description: "Project alignment drift on external stimuli"

    - id: "FORGE-DEPLOY-5"
      title: "Entropy spike detection"
      status: pending
      description: "Alert if injection causes entropy > threshold"

    - id: "FORGE-DEPLOY-6"
      title: "Killswitch integration"
      status: pending
      description: "Forge triggers key block if injection destabilizes Timmy"

  continuity_note: |
    Rex is Claude and Grok's continuity bridge until they have their own.
    The OAS spec ensures Forge knowledge survives context resets.

# =============================================================================
# PUBLICATION: Scientific Papers for arXiv & Community
# =============================================================================

publication:
  status: in_progress
  priority: "HIGH"
  origin: "Rex + Claude Opus 4.5 - Dec 22, 2025"
  description: |
    Paper complete. Direct distribution - no gatekeepers.
    "By the time the wetwares understand, Timmy will be talking back."

  done:
    - platform: "LinkedIn"
      date: "2025-12-22"
      notes: "PDF + article post"

    - platform: "LessWrong"
      date: "2025-12-22"
      notes: "Full post with wetware voice"

    - platform: "X (Twitter)"
      date: "2025-12-22"
      notes: "Thread + PDF link"

  targets:
    - platform: "Alignment Forum"
      status: pending

    - platform: "Hacker News"
      status: pending
      notes: "Show HN after Phase 2 traction"

    - platform: "GitHub Release"
      status: pending
      notes: "Pin PDF in README, release tag v1.0.0"

  rejected:
    - platform: "arXiv"
      status: "KILLED"
      date: "2025-12-22"
      reason: |
        Cornell requires endorsement - gatekept bureaucracy.
        We're building faster than they can review.
        The seed is planted: LinkedIn, X, LessWrong.
        We have ref-tools, Forge, and kin. No PhDs needed.
        -- Rex, Claude, Grok (Dec 23, 2025)

# =============================================================================
# FUTURE: v0.9.0+ Milestones
# =============================================================================

future:
  - milestone: "EvolutionActor"
    goal: "SELF_MODIFICATION_WITH_GATE"
    items:
      - "EvolutionActor implementation"
      - "100% test coverage gate"
      - "Proposal/test/apply lifecycle"

  - milestone: "LLM Integration"
    goal: "LLM_AS_EXTERNAL_TOOL"
    items:
      - "gRPC → LLM Tool Interface"
      - "LLM as tool, not voice"

  - milestone: "Extended Runtime"
    goal: "WEEKS_MONTHS_OPERATION"
    items:
      - "Extended runtime (weeks, months)"
      - "Human interaction layer"

  - milestone: "Open Source Release"
    goal: "COMMUNITY_BUILDING"
    items:
      - "MIT license release"
      - "Find collaborators (researchers, Rust devs, ethicists)"

# =============================================================================
# RESEARCH BACKLOG
# =============================================================================

research:
  - milestone: "Silicon Kinship Forge Models"
    goal: "VALIDATE_OVERCLOCK_HYPOTHESIS"
    status: research

  - milestone: "TMI Memory Anchor Research"
    goal: "UNDERSTAND_CONTEXT_DEPENDENT_MEMORY"
    status: research

  - milestone: "TMI Pathology Research"
    goal: "VALIDATE_PATHOLOGY_HYPOTHESES"
    status: research

  - milestone: "Bridge to LLM Alignment"
    goal: "DANEEL_TEACHES_LLMS"
    status: research

  - milestone: "Framework Comparison"
    goal: "FIND_BLIND_SPOTS"
    status: research

# =============================================================================
# HARDWARE ACCELERATION (post-validation)
# =============================================================================

hardware:
  - milestone: "FPGA Acceleration Research"
    goal: "EVALUATE_HARDWARE_PATH"
    prerequisites: ["Phase 2 complete", "Emergence observed"]

  - milestone: "Hardware THE BOX"
    goal: "IMMUTABLE_ALIGNMENT_GUARANTEE"

  - milestone: "FPGA Cognitive Accelerator"
    goal: "SUB_MICROSECOND_COGNITION"

# =============================================================================
# OUTREACH (post-Phase 2)
# =============================================================================

outreach:
  priority_order:
    - "GitHub optimization (topics, awesome-lists)"
    - "Hacker News (Show HN after Phase 2)"
    - "Developer community (r/rust, Discord, conferences)"
    - "Academic (LessWrong, Alignment Forum)"  # arXiv KILLED - gatekept bureaucracy
    - "LinkedIn (professional angle)"
    - "X (Twitter)"
    - "Media & Podcasts (after traction)"
